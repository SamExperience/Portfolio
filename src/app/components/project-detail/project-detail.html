<div *ngIf="project$ | async as project; else notFound" class="project">
  <!-- ===TOOLS-HEADER=== -->
  <div class="tools-header">
    <a
      routerLink="/"
      class="project__btt-back"
      aria-label="{{ 'PROJECT.BACK_TO_LIST' | translate }}"
    >
      ‚Üê
    </a>
  </div>
  <!-- ===HEADER=== -->
  <header class="project__header">
    <div class="project__meta">
      <span class="project__category">{{ project?.category }}</span>
      <h1 class="project__title">{{ project?.title }}</h1>
      <p class="project__short-description">{{ project?.shortDescription }}</p>

      <div class="project__links" role="group" aria-label="{{ 'PROJECT.LINKS' | translate }}">
        <a
          *ngIf="project?.liveUrl"
          class="btt__header btt-primary"
          [href]="project.liveUrl"
          target="_blank"
          rel="noopener noreferrer"
        >
          {{ 'PROJECT.LIVE_WEBSITE' | translate }}
        </a>
        <a
          *ngIf="project?.githubUrl"
          class="btt__header btt-secondary"
          [href]="project.githubUrl"
          target="_blank"
          rel="noopener noreferrer"
        >
          {{ 'PROJECT.GO_TO_REPOSITORY' | translate }}
        </a>
      </div>

      <div class="project__bullets">
        <ul aria-label="{{ 'PROJECT.TECH_STACK' | translate }}">
          <li *ngFor="let tag of project?.projectTags">{{ tag }}</li>
        </ul>
      </div>
    </div>

    <figure class="project__hero" *ngIf="project?.imgURL?.length">
      <img
        id="img-hero"
        fetchpriority="high"
        [src]="project?.heroImage || 'assets/images/default-img.png'"
        alt="Project hero mockup"
      />
      <figcaption class="sr-only">{{ project?.imgURL?.[0]?.title || '' }}</figcaption>
    </figure>
  </header>
  <!-- ===PROJECT-LAYOUT=== -->
  <div class="project-layout">
    <!-- ===ASIDE=== -->
    <aside class="aside" aria-label="{{ 'PROJECT.PROJECT_INFO' | translate }}">
      <div class="aside__info animate-on-scroll">
        <h2>{{ 'PROJECT.PROJECT_INFO' | translate }}</h2>
        <dl>
          <div class="info-item">
            <dt>{{ 'PROJECT.ROLE' | translate }}</dt>
            <dd>{{ project?.role }}</dd>
          </div>

          <div class="info-item">
            <dt>{{ 'PROJECT.TIMELINE' | translate }}</dt>
            <dd>{{ project?.duration }}</dd>
          </div>

          <div class="info-item">
            <dt>{{ 'PROJECT.TEAM_SIZE' | translate }}</dt>
            <dd>{{ project?.teamSize }}</dd>
          </div>

          <div class="info-item">
            <dt>{{ 'PROJECT.YEAR' | translate }}</dt>
            <dd>{{ project?.year }}</dd>
          </div>
        </dl>
      </div>

      <div class="aside__tech-stack animate-on-scroll">
        <h2>{{ 'PROJECT.TECH_STACK' | translate }}</h2>
        <div *ngFor="let techCategory of project?.techUsed" class="tech-category">
          <div class="tech-tags">
            <h3 class="tech-category-title">{{ techCategory?.title }}</h3>
            <span *ngFor="let tech of techCategory?.names" class="tech-tag">{{ tech }}</span>
          </div>
        </div>
      </div>

      <div class="aside__links animate-on-scroll">
        <h2>{{ 'PROJECT.LINKS' | translate }}</h2>
        <a
          *ngIf="project?.liveUrl"
          [href]="project.liveUrl"
          target="_blank"
          rel="noopener noreferrer"
        >
          {{ 'PROJECT.LIVE_WEBSITE' | translate }}
        </a>
        <a
          *ngIf="project?.githubUrl"
          [href]="project.githubUrl"
          target="_blank"
          rel="noopener noreferrer"
        >
          {{ 'PROJECT.GO_TO_REPOSITORY' | translate }}
        </a>
      </div>
    </aside>
    <!-- ===MAIN=== -->
    <main class="project-content">
      <section class="content-section animate-on-scroll">
        <h2>üìù {{ 'PROJECT.OVERVIEW' | translate }}</h2>
        <p>{{ project?.description }}</p>
      </section>

      <section class="content-section animate-on-scroll" *ngIf="project?.problemStatement">
        <h2>‚ùì {{ 'PROJECT.PROBLEM' | translate }}</h2>
        <p class="section-text">{{ project?.problemStatement }}</p>
      </section>

      <section class="content-section animate-on-scroll">
        <h2>üéØ {{ 'PROJECT.OBJECTIVES' | translate }}</h2>
        <ul class="objectives-list">
          <li *ngFor="let objective of project?.objectif">{{ objective }}</li>
        </ul>
      </section>

      <section class="content-section animate-on-scroll" *ngIf="project?.developmentProcess">
        <h2>üîÑ {{ 'PROJECT.PROCESS' | translate }}</h2>
        <ol class="process-timeline">
          <li *ngFor="let phase of project?.developmentProcess" class="process-item">
            <h3>{{ phase?.phase }}</h3>
            <p>{{ phase?.description }}</p>
            <span class="process-duration" *ngIf="phase?.duration">{{ phase?.duration }}</span>
          </li>
        </ol>
      </section>

      <section class="content-section animate-on-scroll">
        <div class="features-grid">
          <h2>‚ú® {{ 'PROJECT.FEATURES' | translate }}</h2>

          <div class="feature-card" *ngFor="let feature of project?.features">
            <div class="feature-icon">{{ feature?.icon }}</div>
            <h3 class="feature-title">{{ feature?.title }}</h3>
            <p class="feature-description">{{ feature?.description }}</p>
          </div>
        </div>
      </section>

      <section class="content-section animate-on-scroll" *ngIf="project?.technicalDecisions">
        <h2>‚öñÔ∏è {{ 'PROJECT.TECHNICAL_DECISIONS' | translate }}</h2>
        <dl class="decisions-list">
          <div class="decision-item" *ngFor="let decision of project?.technicalDecisions">
            <dt>{{ decision?.question }}</dt>
            <dd>{{ decision?.answer }}</dd>
          </div>
        </dl>
      </section>

      <section class="content-section animate-on-scroll">
        <h2>üñºÔ∏è {{ 'PROJECT.GALLERY' | translate }}</h2>
        <div class="gallery-grid">
          <figure class="gallery-item" *ngFor="let image of project?.imgURL; trackBy: trackByFn">
            <img
              [src]="image?.url"
              [alt]="image?.altText || image?.title || ''"
              [title]="image?.title || ''"
              loading="lazy"
            />
            <figcaption class="gallery-caption">{{ image?.title }}</figcaption>
          </figure>
        </div>
      </section>

      <section class="content-section animate-on-scroll">
        <h2>üéØ {{ 'PROJECT.CHALLENGES' | translate }}</h2>
        <div class="challenge-item" *ngFor="let challenge of project?.challenges; let i = index">
          <div class="challenge-problem">
            <h3>‚ö†Ô∏è {{ 'PROJECT.CHALLENGE' | translate }} {{ i + 1 }}</h3>
            <p>{{ challenge?.problem }}</p>
          </div>
          <div class="challenge-solution">
            <h3>‚úÖ {{ 'PROJECT.SOLUTION' | translate }}</h3>
            <p>{{ challenge?.solution }}</p>
          </div>
        </div>
      </section>

      <section class="content-section animate-on-scroll" *ngIf="project?.accessibility">
        <h2>‚ôø {{ 'PROJECT.ACCESSIBILITY' | translate }}</h2>
        <ul class="learned-list">
          <li *ngFor="let item of project?.accessibility">{{ item }}</li>
        </ul>
      </section>

      <section class="content-section animate-on-scroll">
        <h2>üìä {{ 'PROJECT.RESULTS' | translate }}</h2>
        <div class="results-metrics">
          <div class="metric-card" *ngFor="let metric of project?.metrics">
            <span class="metric-value">{{ metric?.value }}</span>
            <span class="metric-label">{{ metric?.label }}</span>
          </div>
        </div>
        <p class="section-text">{{ project?.results }}</p>
      </section>

      <section class="content-section animate-on-scroll">
        <h2>üéì {{ 'PROJECT.LEARNED' | translate }}</h2>
        <ul class="learned-list">
          <li *ngFor="let learning of project?.whatLearned">{{ learning }}</li>
        </ul>
      </section>

      <section class="content-section animate-on-scroll" *ngIf="project?.futureImprovements">
        <h2>üöÄ {{ 'PROJECT.FUTURE' | translate }}</h2>
        <ul class="roadmap-list">
          <li *ngFor="let improvement of project?.futureImprovements">{{ improvement }}</li>
        </ul>
      </section>

      <section class="content-section cta-section">
        <h2>üíº {{ 'PROJECT.CTA_TITLE' | translate }}</h2>
        <p>{{ 'PROJECT.CTA_TEXT' | translate }}</p>
        <div class="cta-buttons">
          <a routerLink="/projects" class="btt__header btt-primary">{{
            'PROJECT.VIEW_ALL_PROJECTS' | translate
          }}</a>
          <a routerLink="/contact" class="btt__header btt-secondary">{{
            'PROJECT.CONTACT_ME' | translate
          }}</a>
        </div>
      </section>
    </main>
  </div>
  <!-- ===FOOTER=== -->
  <app-footer></app-footer>
</div>

<ng-template #notFound>
  <p>{{ 'PROJECT.NOT_FOUND' | translate }}</p>
</ng-template>
